{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createBlock as _createBlock } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"container\"\n};\nvar _hoisted_2 = {\n  \"class\": \"category-selecter\"\n};\nvar _hoisted_3 = [\"onClick\"];\nvar _hoisted_4 = {\n  id: \"grid\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_TitlePage = _resolveComponent(\"TitlePage\");\n  var _component_Card = _resolveComponent(\"Card\");\n  var _component_Sidebar = _resolveComponent(\"Sidebar\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_TitlePage, {\n    title: \"Works\",\n    description: \"作品集\"\n  }), _createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.categories, function (cat) {\n    return _openBlock(), _createElementBlock(\"button\", {\n      key: cat.value,\n      \"class\": _normalizeClass({\n        active: $options.selectedCategory === cat.value\n      }),\n      onClick: function onClick($event) {\n        return $options.selectedCategory = cat.value;\n      }\n    }, _toDisplayString(cat.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_3);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_4, [_cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n    \"class\": \"grid-sizer\"\n  }, null, -1 /* HOISTED */)), _cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n    \"class\": \"gutter-sizer\"\n  }, null, -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredWorks, function (work) {\n    return _openBlock(), _createBlock(_component_Card, {\n      key: work.id,\n      id: work.id,\n      title: work.title,\n      image: work.image,\n      year: work.year,\n      category: work.category,\n      content: work.content,\n      \"class\": \"grid-item\"\n    }, null, 8 /* PROPS */, [\"id\", \"title\", \"image\", \"year\", \"category\", \"content\"]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createVNode(_component_Sidebar)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["id","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_createVNode","_component_TitlePage","title","description","_hoisted_2","_renderList","$data","categories","cat","key","value","_normalizeClass","active","$options","selectedCategory","onClick","$event","label","_hoisted_3","_hoisted_4","filteredWorks","work","_createBlock","_component_Card","image","year","category","content","_component_Sidebar"],"sources":["/Users/yusui/GitHub/Mono/site/src/views/Works.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <TitlePage\n      title=\"Works\"\n      description=\"作品集\"\n    />\n\n    <div class=\"category-selecter\">\n      <button \n        v-for=\"cat in categories\" \n        :key=\"cat.value\"\n        :class=\"{ active: selectedCategory === cat.value }\"\n        @click=\"selectedCategory = cat.value\"\n      >\n        {{ cat.label }}\n      </button>\n    </div>\n\n    <div id=\"grid\">\n      <div class=\"grid-sizer\"></div>\n      <div class=\"gutter-sizer\"></div>\n      <Card\n        v-for=\"work in filteredWorks\"\n        :key=\"work.id\"\n        :id=\"work.id\"\n        :title=\"work.title\"\n        :image=\"work.image\"\n        :year=\"work.year\"\n        :category=\"work.category\"\n        :content=\"work.content\"\n        class=\"grid-item\"\n      />\n    </div>\n  </div>\n  <Sidebar />\n</template>\n\n<script>\nimport Card from '@/components/Card.vue';\nimport Sidebar from '@/components/Sidebar.vue';\nimport { works } from '@/data/works';\nimport TitlePage from '@/components/Title.vue';\nimport { masonryMixin } from '@/assets/scripts/masonry.js';\nimport imagesLoaded from 'imagesloaded';\n\nexport default {\n  name: 'WorksPage',\n  components: {\n    Card,\n    Sidebar,\n    TitlePage\n  },\n  mixins: [masonryMixin],\n  data() {\n    return {\n      categories: [\n        { value: 'all', label: 'すべて' },\n        { value: 'art', label: 'アート' },\n        { value: 'drawing', label: 'イラスト' },\n        { value: 'photo', label: '写真' },\n        { value: 'product', label: 'プロダクト' },\n        { value: 'poster', label: 'ポスター' },\n        { value: 'modeling', label: 'モデリング' },\n        { value: 'logo', label: 'ロゴ' },\n        { value: 'other', label: 'その他' }\n      ],\n      works,\n      isLayoutUpdating: false\n    };\n  },\n  computed: {\n    selectedCategory: {\n      get() {\n        return this.$route.query.category || 'all';\n      },\n      set(value) {\n        this.$router.replace({ query: { category: value === 'all' ? null : value } });\n      }\n    },\n    filteredWorks() {\n      if (this.selectedCategory === 'all') {\n        return this.works;\n      }\n      return this.works.filter(work => work.category === this.selectedCategory);\n    }\n  },\n  watch: {\n    selectedCategory() {\n      if (this.isLayoutUpdating) return;\n      this.isLayoutUpdating = true;\n\n      // DOMの更新を待つ\n      this.$nextTick(() => {\n        // さらにもう一度待つことで、画像の読み込みが開始されるのを確実に待つ\n        setTimeout(() => {\n          if (!this.masonry) {\n            this.isLayoutUpdating = false;\n            return;\n          }\n\n          // レイアウトを更新\n          this.masonry.layout();\n          \n          // 少し待ってからもう一度更新\n          setTimeout(() => {\n            this.masonry.layout();\n            this.isLayoutUpdating = false;\n          }, 100);\n        }, 50);\n      });\n    }\n  },\n  methods: {\n    updateMasonryLayout() {\n      if (!this.masonry) return;\n      \n      // 全ての画像の読み込みを待つ\n      const images = document.querySelectorAll('#grid img');\n      let loadedImages = 0;\n      \n      const onImageLoad = () => {\n        loadedImages++;\n        if (loadedImages === images.length) {\n          this.masonry.layout();\n        }\n      };\n\n      images.forEach(img => {\n        if (img.complete) {\n          onImageLoad();\n        } else {\n          img.addEventListener('load', onImageLoad);\n        }\n      });\n\n      // 念のため、少し待ってからもレイアウトを更新\n      setTimeout(() => {\n        this.masonry.layout();\n      }, 100);\n    }\n  },\n  mounted() {\n    this.updateMasonryLayout();\n  }\n};\n</script>\n\n<style scoped>\n\n\n.category-selecter {\n  margin-bottom: 30px;\n  width: 100%;\n  display: flex;\n  justify-content: left;\n  gap: 20px;\n  text-align: center;\n\n  button {\n    padding: 8px 8px;\n    border: none;\n    border-radius: 0px;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    background: none;\n\n    &:hover {\n      background: #d4cfcf;\n    }\n  }\n\n  button.active {\n    background: #333;\n    color: white;\n  }\n}\n\n#grid {\n  width: 100%;\n  margin: 0 auto;\n  font-size: 0; /* インラインブロック間の隙間を消す */\n\n  .grid-sizer,\n  .grid-item {\n    width: calc(50% - 10px); /* 横の余白を調整 */\n  }\n\n  .gutter-sizer {\n    width: 20px; /* 横の余白を調整 */\n  }\n\n  .grid-item {\n    margin-bottom: 20px; /* 縦の余白を少し減らす */\n    display: inline-block;\n    font-size: 16px; /* フォントサイズを戻す */\n    vertical-align: top; /* 上端揃えにする */\n  }\n\n  .grid-item img {\n    width: 100%;\n    height: auto;\n    display: block; /* 画像下部の余白を消す */\n    border: var(--img-gray) 1px solid;\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .gallery-container {\n    padding: 10px;\n    padding-top: 80px; /* タイトルの高さ分の余白を維持 */\n  }\n\n  #grid {\n    .grid-sizer,\n    .grid-item {\n      width: 100%;\n      margin-bottom: 15px;\n    }\n\n    .gutter-sizer {\n      width: 0;\n    }\n  }\n\n  .category-selecter {\n    flex-wrap: wrap;\n    gap: 10px;\n    justify-content: center;\n  }\n}\n</style>"],"mappings":";;EACO,SAAM;AAAW;;EAMf,SAAM;AAAmB;iBAPlC;;EAkBSA,EAAE,EAAC;AAAM;;;;;uBAlBlBC,mBAAA,CAAAC,SAAA,SACEC,mBAAA,CAgCM,OAhCNC,UAgCM,GA/BJC,YAAA,CAGEC,oBAAA;IAFAC,KAAK,EAAC,OAAO;IACbC,WAAW,EAAC;MAGdL,mBAAA,CASM,OATNM,UASM,I,kBARJR,mBAAA,CAOSC,SAAA,QAffQ,WAAA,CASsBC,KAAA,CAAAC,UAAU,EAThC,UASeC,GAAG;yBADZZ,mBAAA,CAOS;MALNa,GAAG,EAAED,GAAG,CAACE,KAAK;MACd,SAXTC,eAAA;QAAAC,MAAA,EAW0BC,QAAA,CAAAC,gBAAgB,KAAKN,GAAG,CAACE;MAAK;MAC/CK,OAAK,WAALA,OAAKA,CAAAC,MAAA;QAAA,OAAEH,QAAA,CAAAC,gBAAgB,GAAGN,GAAG,CAACE,KAAK;MAAA;wBAEjCF,GAAG,CAACS,KAAK,gCAdpBC,UAAA;oCAkBIpB,mBAAA,CAcM,OAdNqB,UAcM,G,0BAbJrB,mBAAA,CAA8B;IAAzB,SAAM;EAAY,6B,0BACvBA,mBAAA,CAAgC;IAA3B,SAAM;EAAc,8B,kBACzBF,mBAAA,CAUEC,SAAA,QA/BRQ,WAAA,CAsBuBQ,QAAA,CAAAO,aAAa,EAtBpC,UAsBeC,IAAI;yBADbC,YAAA,CAUEC,eAAA;MARCd,GAAG,EAAEY,IAAI,CAAC1B,EAAE;MACZA,EAAE,EAAE0B,IAAI,CAAC1B,EAAE;MACXO,KAAK,EAAEmB,IAAI,CAACnB,KAAK;MACjBsB,KAAK,EAAEH,IAAI,CAACG,KAAK;MACjBC,IAAI,EAAEJ,IAAI,CAACI,IAAI;MACfC,QAAQ,EAAEL,IAAI,CAACK,QAAQ;MACvBC,OAAO,EAAEN,IAAI,CAACM,OAAO;MACtB,SAAM;;sCAIZ3B,YAAA,CAAW4B,kBAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}